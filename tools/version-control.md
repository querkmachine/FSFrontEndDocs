---
layout: default
title: Version control
---

## Source control strategy 

Many of our projects have front-ends that work on the principle of having a source (`src`) directory and a destination (`dst` or `dist`) directory. 

The source directory contains the raw assets for the project, such as Sass code, TypeScript, unoptimised images, etc. It is the only one that is directly modified and should be stored in source control.

The destination directory has everything that is needed for the website to function in a browser. Compiled CSS, JavaScript, optimised images and the like go in here. **Destination directories should not be in source control, and their contents should be entirely generated by build tools.**

Basically: Source should be the only one that needs to be in source control, destination should be the only one that needs to be deployed. And never the twain shall meet. 

## Team Foundation Version Control

We here at Felinesoft use Team Foundation Version Control (TFVC) for managing code. It's basically Microsoft's fork of Subversion. It sucks.

<aside class="aside aside--opinion">
Git is better. Everyone wants to use Git. Microsoft themselves use Git. The default source control provider in newer versions of TFS is Git. Please let us use Git. 
</aside>

<aside class="aside aside--correction">
The main reason we've stuck with TFVC is that it integrates really well with Team Foundation Server (TFS). Visual Studio 2017 and TFS 2017 bring this same level of integration to Git repos, so hopefully we'll be making that transition sooner rather than later. 
</aside>

The differences between them aren't too radical, but the differences are perhaps enough to trip some people up. [There's an extensive, technical list on Microsoft's website](https://www.visualstudio.com/en-us/docs/tfvc/comparison-git-tfvc).

Here's a basic overview: 

### Terminology 

Some terminology is different between the two systems: 

|Git|TFVC|
|:-|:-|
|Blame|Annotate|
|Commit *(verb)*|Check in|
|Commit *(noun)*|Changeset|
|Diff|Compare|
|Log|History|
|Pull|Get latest version|
|Push|Check in|
|Stash|Shelveset|

### Commit flow

In Git you'd normally prepare a number of commits before pushing them collectively to the remote server. **In TFVC you 'check in' code, which is equivalent to committing and pushing simultaneously.** 

This is reflective of the main architectural difference between Git and TFVC. Git is a distributed system—with full repo histories stored on every machine—while TFVC is a centralised system—computers have only one version of the project and history is solely the responsibility of the remote server. 

### Branching

Git manages branches 'in place'. It deltas the modified files in your current directory, meaning you don't need to change any server settings to switch branches. It also means it doesn't take up a lot of room. It's quick and easy, that's why [Git Flow](https://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/) is so great. 

TFVC is rubbish at branching. Branches create a duplication of the entire project in a separate directory, meaning you're going to need to change any configuration settings (such as those in <abbr title="Internet Information Services Manager">IIS</abbr>) before making any changes. Merging branches back into trunk is also an exercise in pain. Avoid unnecessarily branching stuff where possible. 